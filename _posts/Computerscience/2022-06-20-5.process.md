---
title:  "5 프로세스 관리"
excerpt: "프로세스 관리"
toc: true
toc_sticky: true

categories:
  - Computer science
tags:
  - [Computer science]
---  

# 5. 프로세스 관리 #

## 1. 프로세스의 개념 ##
- 프로세스란 실행중인 프로그램을 뜻한다.
  - 프로세스는 CPU를 획득해 자신의 코드를 수행하거나, CPU를 반환하고 입출력작업을 수행
  - 현대의 운영체제는 여러 프로세스가 함께 수행되는 시분할 시스템이다. 따라서 타이머 인터럽트에 의해 짧은 시간 동안 CPU를 사용한 후 빼앗기는 상황이 반복되기에 이전에 어느 명령까지 수행했는지 정확한 상태를 재현할 필요가 있다 -> 프로세스 문맥
  - 프로세스 문맥
    - 하드웨어 문맥: CPU의 수행 상태를 나타냄. 프로그램 카운터값과 각종 레지스터에 저장하고 있는 값을 의미
    - 프로세스 주소 공간: 코드, 데이터, 스택으로 이루어진 독자적인 주소 공간
    - 커널상의 문맥: 운영체제는 프로세스를 관리하기 위해 자료구조를 유지함. PCB(프로세스 제어 블록)와 커널 스택이 이에 해당한다

## 2. 프로세스의 상태 ##
- 실행(running): 프로세스가 CPU를 보유하고 기계어 명령을 실행하고 있는 상태
- 준비(ready): 프로세스가 CPU만 보유하면 당장 명령을 실행할 수 있지만 CPU를 할당받지 못한 상태
- 봉쇄(blocked): CPU를 할당받더라도 당장 명령을 실행할 수 없는 상태(ex_ 프로세스가 요청한 입출력작업이 진행중인 경우)
- 일시적 상태
  - 시작: 프로세스가 시작되어 그 프로세스를 위한 각종 자료구조는 생성되었지만 메모리 획득을 승인받지 못한 상태
  - 완료: 프로세스가 종료되었으나 운영체제가 그 프로세스와 관련된 자료구조를 완전히 정리하지 못한 상태

* 문맥 교환(context switch): 
  * 실행시킬 프로세스를 변경하기 위해 원래 수행 중이던 프로세스의 문맥을 저장하고 새로운 프로세스의 문맥을 세팅하는 과정. 
  * 문맥교환은 타이머 인터럽트가 발생하는 경우 및 실행 상태에 있던 프로세스가 입출력 요청 등으로 봉쇄 상태로 바뀌는 경우가 있음. 이때 준비상태에 있는 프로세스들 중에서 CPU를 할당받을 프로세스를 선택한 후 실제로 CPU의 제어권을 넘겨받는 과정을 CPU <i>디스패치</i>라고 한다.

> ** 입출력을 요청한 프로세스의 상태변화 예시 **
>
>실행 상태의 프로세스가 디스크에서 파일의 내용을 읽어오는 작업 실행
>
>디스크에서 읽는 작업은 CPU 처리 속도에 비해 상대적으로 오랜 시간이 소요되기 때문에 완료가 될때까지 CPU를 반환한 다음 디스크 입출력 서비스를 기다리며 봉쇄상태로 변경
>
> CPU스케줄러가 준비상태의 프로세스들 중에서 적절히 하나를 택해 CPU 할당하여 실행 상태로 변경
> 
> 입출력을 요청한 프로세스는 디스크 입출력을 기다리는 큐에 서있다가 차례가 되어 디스크 컨트롤러로부터 서비스를 받고나면 디스크 컨트롤러가 CPU에게 인터럽트 발생
> 
> CPU가 해당 인터럽트에 대한 루틴을 수행하는 동안 CPU에서 실행되던 프로세스의 상태는 사용자모드에서 커널모드로 변경 (처리루틴과 관련이 없더라도 편의상 직전 프로세스의 문맥에서 실행된 것으로 간주하여 인터럽트를 당한 프로세스가 커널모드로 진입한 것으로 간주)
>
>  디스크 컨트롤러가 발생시킨 인터럽트는 입출력이 완료된 프로세스의 상태를 봉쇄상태에서 준비상태로 바꿈.

![프로세스 상태 변화도](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fbk1fjx%2FbtqHUaHNaBH%2Fzj3UTEgBteU7RsZWLQUGxK%2Fimg.jpg){: #magnific title="https://myeongmy.tistory.com/51?category=894941"}

## 3. 프로세스 제어블록(Process Control Block) ##

- 프로세스마다 유지하는 정보들을 담는 커널 내의 자료구조.

- PCB 요소>  
  - 프로세스의 상태: CPU를 할당해도 되는지 여부를 결정하기 위해 필요
  - 프로그램 카운터 값: 다음에 수행할 명령의 위치 (메모리 주소)
  - CPU 레지스터 값: CPU 연산을 위해 레지스터에 어떤 값을 저장하고 있는지
  - CPU 스케줄링 정보: CPU 스케줄링을 위해 필요한 정보 
  - 메모리 관리 정보: 메모리 할당을 위해 필요한 정보
  - 자원 사용 정보: 사용자에게 자원 사용 요금을 계산해 청구하는 등의 용도

## 4. 문맥 교환 ##
- 

## 5. 프로세스를 스케줄링하기 위한 큐 ##
-
## 6. 스케줄러 ##
- 
## 7. 프로세스의 생성 ##
- 
## 8. 프로세스 간의 협력
