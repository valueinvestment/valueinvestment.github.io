---
title: "[ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive] 13ì¥ - íƒ€ì… ì²´í¬"
excerpt: ""
toc: true
toc_sticky: true

categories:
  - JS
tags:
  - [JS, Java Script, Study]
---

![ëª¨ë˜ ë”¥ë‹¤ì´ë¸Œ](https://k.kakaocdn.net/dn/6gbOs/btrcMGbY7yQ/Z3sIpZrBU53FvMbdqlLD01/img.png){: #magnific title=""}

# ğŸ‰ íƒ€ì… ì²´í¬

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë™ì  íƒ€ì…(dynamic typed) ì–¸ì–´ì´ë¯€ë¡œ ë³€ìˆ˜ì— ì–´ë–¤ ê°’ì´ í• ë‹¹ë  ì§€ ì˜ˆì¸¡í•˜ê¸° ì–´ë µë‹¤. ì•„ë˜ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```js
function sum(a, b) {
  return a + b;
}
```

ìœ„ ì½”ë“œë¥¼ ì‘ì„±í•œ ê°œë°œìì˜ ì˜ë„ëŠ” ì•„ë§ˆë„ 2ê°œì˜ number íƒ€ì… ì¸ìˆ˜ë¥¼ ì „ë‹¬ë°›ì•„ ê·¸ í•©ê³„ë¥¼ ë°˜í™˜í•˜ë ¤ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì¸¡ëœë‹¤. í•˜ì§€ë§Œ ì½”ë“œ ìƒìœ¼ë¡œëŠ” ì–´ë–¤ íƒ€ì…ì˜ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ì—¬ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ íƒ€ì…ì˜ ê°’ì„ ë°˜í™˜í•´ì•¼ í•˜ëŠ”ì§€ ëª…í™•í•˜ì§€ ì•Šë‹¤. ë”°ë¼ì„œ ìœ„ ì½”ë“œëŠ” ë‹¤ìŒì²˜ëŸ¼ í˜¸ì¶œë  ìˆ˜ ìˆë‹¤.

```js
function sum(a, b) {
  return a + b;
}

sum("x", "y"); // 'xy'
```

ìœ„ ì½”ë“œëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²• ìƒ ì–´ë– í•œ ë¬¸ì œë„ ì—†ìœ¼ë¯€ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ì•„ë¬´ëŸ° ì´ì˜ ì œê¸°ì—†ì´ ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ìƒí™©ì´ ë°œìƒí•œ ì´ìœ ëŠ” ë³€ìˆ˜ë‚˜ ë°˜í™˜ê°’ì˜ íƒ€ì…ì„ ì‚¬ì „ì— ì§€ì •í•˜ì§€ ì•ŠëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë™ì  íƒ€ì´í•‘(Dynamic Typing)ì— ì˜í•œ ê²ƒì´ë‹¤. ì´ì™€ ê°™ì€ ì´ìœ ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” íƒ€ì… ì²´í¬ê°€ í•„ìš”í•˜ë‹¤.

```js
function sum(a, b) {
  // aì™€ bê°€ number íƒ€ì…ì¸ì§€ ì²´í¬
  return a + b;
}
```

## ğŸ˜‰ typeof

**íƒ€ì… ì—°ì‚°ì(Type Operator)** **typeof**ëŠ” í”¼ì—°ì‚°ìì˜ ë°ì´í„° íƒ€ì…ì„ ë¬¸ìì—´ë¡œ ë°˜í™˜í•œë‹¤.

```js
typeof ""; // string
typeof 1; // number
typeof NaN; // number
typeof true; // boolean
typeof []; // object
typeof {}; // object
typeof new String(); // object
typeof new Date(); // object
typeof /test/gi; // object
typeof function () {}; // function
typeof undefined; // undefined
typeof null; // object (ì„¤ê³„ì  ê²°í•¨)
typeof undeclared; // undefined (ì„¤ê³„ì  ê²°í•¨)
```

ê·¸ëŸ°ë° typeof ì—°ì‚°ìëŠ” nullê³¼ ë°°ì—´ì˜ ê²½ìš° object, í•¨ìˆ˜ì˜ ê²½ìš° functionë¥¼ ë°˜í™˜í•˜ê³ , Date, RegExp, ì‚¬ìš©ì ì •ì˜ ê°ì²´ ë“± ê±°ì˜ ëª¨ë“  ê°ì²´ì˜ ê²½ìš°, objectë¥¼ ë°˜í™˜í•œë‹¤. ë”°ë¼ì„œ typeofëŠ” nullì„ ì œì™¸í•œ ì›ì‹œ íƒ€ì…ì„ ì²´í¬í•˜ëŠ” ë°ëŠ” ë¬¸ì œê°€ ì—†ì§€ë§Œ ê°ì²´ì˜ ì¢…ë¥˜ê¹Œì§€ êµ¬ë¶„í•˜ì—¬ ì²´í¬í•˜ë ¤í•  ë•ŒëŠ” ì‚¬ìš©í•˜ê¸°ëŠ” ê³¤ë€í•˜ë‹¤. ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ê°ì²´(ì¼ë°˜ ê°ì²´, ë°°ì—´, Date, RegExp, Function, DOM ìš”ì†Œ ë“±)ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” íƒ€ì… ì²´í¬ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ë³´ì.

## ğŸ˜‰ Object.prototype.toString

**Object.prototype.toString** ë©”ì†Œë“œëŠ” ê°ì²´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì„ ë°˜í™˜í•œë‹¤.

```js
var obj = new Object();
obj.toString(); // [object Object]
```

**Function.prototype.call** ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ëª¨ë“  íƒ€ì…ì˜ ê°’ì˜ íƒ€ì…ì„ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤.

```js
Object.prototype.toString.call(""); // [object String]
Object.prototype.toString.call(new String()); // [object String]
Object.prototype.toString.call(1); // [object Number]
Object.prototype.toString.call(new Number()); // [object Number]
Object.prototype.toString.call(NaN); // [object Number]
Object.prototype.toString.call(Infinity); // [object Number]
Object.prototype.toString.call(true); // [object Boolean]
Object.prototype.toString.call(undefined); // [object Undefined]
Object.prototype.toString.call(); // [object Undefined]
Object.prototype.toString.call(null); // [object Null]
Object.prototype.toString.call([]); // [object Array]
Object.prototype.toString.call({}); // [object Object]
Object.prototype.toString.call(new Date()); // [object Date]
Object.prototype.toString.call(Math); // [object Math]
Object.prototype.toString.call(/test/i); // [object RegExp]
Object.prototype.toString.call(function () {}); // [object Function]
Object.prototype.toString.call(document); // [object HTMLDocument]
Object.prototype.toString.call(argument); // [object Arguments]
Object.prototype.toString.call(undeclared); // ReferenceError
```

ì´ê²ƒì„ ì´ìš©í•˜ì—¬ íƒ€ì…ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ì.

```js
function getType(target) {
  return Object.prototype.toString.call(target).slice(8, -1);
}
```

**String.prototype.slice** ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Object.prototype.toString.call ë©”ì†Œë“œê°€ ë°˜í™˜í•œ ë¬¸ìì—´ì—ì„œ â€œ[objectâ€ì™€ â€œ]â€ë¥¼ ì œì™¸í•˜ê³  íƒ€ì…ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ë§Œì„ ì¶”ì¶œí•˜ì˜€ë‹¤.

```js
getType(""); // String
getType(1); // Number
getType(true); // Boolean
getType(undefined); // Undefined
getType(null); // Null
getType({}); // Object
getType([]); // Array
getType(/test/i); // RegExp
getType(Math); // Math
getType(new Date()); // Date
getType(function () {}); // Function
```

ì´ì œ ì•ì—ì„œ ì‚´í´ë³¸ sum í•¨ìˆ˜ì— íƒ€ì… ì²´í¬ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ë³´ì.

```js
function sum(a, b) {
  // aì™€ bê°€ number íƒ€ì…ì¸ì§€ ì²´í¬
  if (getType(a) !== "Number" || getType(b) !== "Number") {
    throw new TypeError("íŒŒë¼ë¯¸í„°ì— number íƒ€ì…ì´ ì•„ë‹Œ ê°’ì´ í• ë‹¹ë˜ì—ˆìŠµë‹ˆë‹¤.");
  }
  return a + b;
}

console.log(sum(10, 20)); // 30
console.log(sum("10", 20)); // TypeError
```

íƒ€ì…ë³„ë¡œ ì²´í¬í•˜ëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ í•¨ìˆ˜ë¥¼ ì‘ì„±í•œë‹¤.

```js
function getType(target) {
  return Object.prototype.toString.call(target).slice(8, -1);
}

function isString(target) {
  return getType(target) === "String";
}

function isNumber(target) {
  return getType(target) === "Number";
}

function isBoolean(target) {
  return getType(target) === "Boolean";
}

function isNull(target) {
  return getType(target) === "Null";
}

function isUndefined(target) {
  return getType(target) === "Undefined";
}

function isObject(target) {
  return getType(target) === "Object";
}

function isArray(target) {
  return getType(target) === "Array";
}

function isDate(target) {
  return getType(target) === "Date";
}

function isRegExp(target) {
  return getType(target) === "RegExp";
}

function isFunction(target) {
  return getType(target) === "Function";
}
```

## ğŸ˜‰ instanceof

ì´ì™€ ê°™ì´ **Object.prototype.toString**ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ì˜ ì¢…ë¥˜(ì¼ë°˜ ê°ì²´, ë°°ì—´, Date, RegExp, Function, DOM ìš”ì†Œ ë“±)ê¹Œì§€ ì‹ë³„í•  ìˆ˜ ìˆëŠ” íƒ€ì… ì²´í¬ ê¸°ëŠ¥ì„ ì‘ì„±í•˜ì˜€ë‹¤.

ê·¸ëŸ°ë°, ì´ ë°©ë²•ìœ¼ë¡œëŠ” ê°ì²´ì˜ ìƒì† ê´€ê³„ê¹Œì§€ ì²´í¬í•  ìˆ˜ëŠ” ì—†ë‹¤. ì•„ë˜ì˜ ì˜ˆì œë¥¼ ì‚´í´ë³´ì.

```js
// HTMLElementë¥¼ ìƒì†ë°›ì€ ëª¨ë“  DOM ìš”ì†Œì— css í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•˜ê³  ê°’ì„ í• ë‹¹í•œë‹¤.
function css(elem, prop, val) {
  // type checking...
  elem.style[prop] = val;
}

css({}, "color", "red");
// TypeError: Cannot set property 'color' of undefined
```

css í•¨ìˆ˜ì˜ ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì—ëŠ” ë°˜ë“œì‹œ HTMLElementë¥¼ ìƒì†ë°›ì€ ëª¨ë“  DOM ìš”ì†Œë¥¼ ì „ë‹¬í•˜ì—¬ì•¼ í•œë‹¤. ë‹¤ì‹œë§í•´, css í•¨ìˆ˜ì˜ ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì—ëŠ” HTMLDivElement, HTMLUListElement, HTMLLIElement, HTMLParagraphElement ë“± ëª¨ë“  DOM ìš”ì†Œê°€ ì „ë‹¬ë  ìˆ˜ ìˆë‹¤. ì´ë¥¼ ì¼ì¼ì´ ì²´í¬í•  ìˆ˜ëŠ” ì—†ê¸° ë•Œë¬¸ì— HTMLElementë¥¼ ìƒì†ë°›ì€ ê°ì²´, ì¦‰ DOM ìš”ì†Œì¸ì§€ í™•ì¸í•˜ì—¬ì•¼ í•œë‹¤.

![Element Node](https://poiemaweb.com/img/HTMLElement.png){: #magnific title="DOM treeì˜ ê°ì²´ êµ¬ì„±"}

**íƒ€ì… ì—°ì‚°ì(Type Operator)**ì—ëŠ” ì•ì„œ ì‚´í´ë³¸ **typeof** ì´ì™¸ì— **instanceof**ë¥¼ ì œê³µí•œë‹¤. instanceof ì—°ì‚°ìëŠ” í”¼ì—°ì‚°ìì¸ ê°ì²´ê°€ ìš°í•­ì— ëª…ì‹œí•œ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ ì—¬ë¶€ë¥¼ ì•Œë ¤ì¤€ë‹¤. ì´ë•Œ íƒ€ì…ì´ë€ constructorë¥¼ ë§í•˜ë©° í”„ë¡œí† íƒ€ì… ì²´ì¸ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  constructorë¥¼ ê²€ìƒ‰í•˜ì—¬ ì¼ì¹˜í•˜ëŠ” constructorê°€ ìˆë‹¤ë©´ trueë¥¼ ë°˜í™˜í•œë‹¤.

```js
function Person() {}
const person = new Person();

console.log(person instanceof Person); // true
console.log(person instanceof Object); // true
```

ì´ë¥¼ ì´ìš©í•´ css í•¨ìˆ˜ì— íƒ€ì… ì²´í¬ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ë³´ì.

```html
<!DOCTYPE html>
<html>
  <body>
    <p>Hello</p>
    <script>
      function getType(target) {
        return Object.prototype.toString.call(target).slice(8, -1);
      }

      function isString(target) {
        return getType(target) === "String";
      }

      function isElement(target) {
        return !!(target && target instanceof HTMLElement);
        // ë˜ëŠ” `nodeType`ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
        // return !!(target && target.nodeType === 1);
      }

      // HTMLElementë¥¼ ìƒì†ë°›ì€ ëª¨ë“  DOM ìš”ì†Œì— css í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•˜ê³  ê°’ì„ í• ë‹¹í•œë‹¤.
      function css(elem, prop, val) {
        // type checking
        if (!(isElement(elem) && isString(prop) && isString(val))) {
          throw new TypeError("ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
        elem.style[prop] = val;
      }

      css(document.querySelector("p"), "color", "red");
      css(document.querySelector("div"), "color", "red");
      // TypeError: ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </script>
  </body>
</html>
```

## ğŸ˜‰ ìœ ì‚¬ ë°°ì—´ ê°ì²´

ë°°ì—´ì¸ì§€ ì²´í¬í•˜ê¸° ìœ„í•´ì„œëŠ” Array.isArray ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.

```js
console.log(Array.isArray([])); // true
console.log(Array.isArray({})); // false
console.log(Array.isArray("123")); // false
```

ìœ ì‚¬ ë°°ì—´ ê°ì²´(array-like object)ì€ length í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ê°ì²´ë¡œ ë¬¸ìì—´, arguments, HTMLCollection, NodeList ë“±ì€ ìœ ì‚¬ ë°°ì—´ì´ë‹¤. ìœ ì‚¬ ë°°ì—´ ê°ì²´ëŠ” length í”„ë¡œí¼í‹°ê°€ ìˆìœ¼ë¯€ë¡œ ìˆœíšŒí•  ìˆ˜ ìˆìœ¼ë©° call, apply í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì˜ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

ì–´ë–¤ ê°ì²´ê°€ ìœ ì‚¬ ë°°ì—´ì¸ì§€ ì²´í¬í•˜ë ¤ë©´ ìš°ì„  length í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ”ì§€ length í”„ë¡œí¼í‹°ì˜ ê°’ì´ ì •ìƒì ì¸ ê°’ì¸ì§€ ì²´í¬í•œë‹¤.

```html
<!DOCTYPE html>
<html>
  <body>
    <ul>
      <li></li>
      <li></li>
      <li></li>
    </ul>
    <script>
      console.log(undefined == null);
      const isArrayLike = function (collection) {
        // ë°°ì—´ ì¸ë±ìŠ¤: 32bit ì •ìˆ˜(2ì˜ 32ì œê³± - 1)
        // ìœ ì‚¬ ë°°ì—´ ì¸ë±ìŠ¤: ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ì–‘ì˜ ì •ìˆ˜(2ì˜ 53ì œê³± - 1)
        const MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;
        // ë¹ˆë¬¸ìì—´ì€ ìœ ì‚¬ë°°ì—´ì´ë‹¤. undefined == null => true
        const length = collection == null ? undefined : collection.length;
        return (
          typeof length === "number" && length >= 0 && length <= MAX_ARRAY_INDEX
        );
      };

      // true
      console.log(isArrayLike([]));
      console.log(isArrayLike("abc"));
      console.log(isArrayLike(""));
      console.log(isArrayLike(document.querySelectorAll("li")));
      console.log(isArrayLike(document.getElementsByName("li")));
      console.log(isArrayLike({ length: 0 }));
      (function () {
        console.log(isArrayLike(arguments));
      })();

      // false
      console.log(isArrayLike(123));
      console.log(isArrayLike(document.querySelector("li")));
      console.log(isArrayLike({ foo: 1 }));
      console.log(isArrayLike());
      console.log(isArrayLike(null));
    </script>
  </body>
</html>
```
