---
title:  "[Reactë¥¼ ë‹¤ë£¨ëŠ” ê¸°ìˆ ] 7ì¥ - ì»´í¬ë„ŒíŠ¸ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œ"
excerpt: ""
toc: true
toc_sticky: true

categories:
  - React
tags:
  - [React, JS, Java Script, Study]
---  

## ğŸ˜‰ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œì˜ ì´í•´ ##

- ë¼ì´í”„ ì‚¬ì´í´ : í˜ì´ì§€ì— ë Œë”ë§ë˜ê¸° ì „ì¸ ì¤€ë¹„ ê³¼ì • ~ í˜ì´ì§€ì—ì„œ ì‚¬ë¼ì§ˆ ë•Œ ê¹Œì§€
  - ì²˜ìŒìœ¼ë¡œ ë Œë”ë§í• ë•Œ ì–´ë–¤ ì‘ì—…ì„ ì²˜ë¦¬í•´ì•¼í•  ë•Œ
  - ì—…ë°ì´íŠ¸ í•˜ê¸° ì „, í›„ì— ì–´ë–¤ ì‘ì—…ì„ ì²˜ë¦¬í•´ì•¼ í•  ë•Œ
  - ë¶ˆí•„ìš”í•œ ì—…ë°ì´íŠ¸ë¥¼ ë°©ì§€í•  ë•Œ

- Will ì ‘ë‘ì‚¬ - ì–´ë–¤ ì‘ì—…ì„ ì‘ë™í•˜ê¸° ì „ì— ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œ
- Did ì ‘ë‘ì‚¬ - ì–´ë–¤ ì‘ì—…ì„ ì‘ë™í•œ í›„ì— ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œ


- ë¼ì´í”„ì‚¬ì´í´ì€ ì´ ì„¸ ê°€ì§€ ë§ˆìš´íŠ¸, ì—…ë°ì´íŠ¸, ì–¸ë§ˆìš´íŠ¸ ì¹´í…Œê³ ë¦¬ë¡œ ë‚˜ë‰œë‹¤.

  - ë§ˆìš´íŠ¸ : í˜ì´ì§€ì— ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚¨

  - ì—…ë°ì´íŠ¸ : ì»´í¬ë„ŒíŠ¸ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸(ë¦¬ë Œë”ë§)

  - ì–¸ë§ˆìš´íŠ¸ : í˜ì´ì§€ì—ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§


### ğŸ±â€ğŸ‰ ë§ˆìš´íŠ¸ ###
- DOMì´ ìƒì„±ë˜ê³  ì›¹ ë¸Œë¼ìš°ì €ìƒì— ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ ë§ˆìš´íŠ¸(mount)ë¼ê³  í•œë‹¤. ì´ ë•Œ ë‹¤ìŒì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.

- ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°
1. constructor ë©”ì„œë“œ : ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” í´ë˜ìŠ¤ ìƒì„±ì ë©”ì„œë“œ
2. getDerivedStateFromProps ë©”ì„œë“œ : props ì— ìˆëŠ” ê°’ì„ state ì— ë„£ì„ ë•Œì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ
3. render ë©”ì„œë“œ : ì¤€ë¹„í•œ UIë¥¼ ë Œë”ë§í•˜ëŠ” ë©”ì„œë“œ
4. componentDidMount ë©”ì„œë“œ : ì»´í¬ë„ŒíŠ¸ê°€ ì›¹ ë¸Œë¼ìš°ì €ìƒì— ë‚˜íƒ€ë‚œ í›„ì— í˜¸ì¶œí•˜ëŠ”ë©”ì„œë“œ


### ğŸ±â€ğŸ‰ ì—…ë°ì´íŠ¸ ###
- ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ìŒì˜ ê²½ìš°ì— ì—…ë°ì´íŠ¸í•œë‹¤.
  - props ê°€ ë°”ë€” ë•Œ
  - state ê°€ ë°”ë€” ë•Œ
  - ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë  ë•Œ
  - this.forceUpdate ë¡œ ê°•ì œë¡œ ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•  ë•Œ

- ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸
1. getDerivedStateFromProps ë©”ì„œë“œ : props ì— ìˆëŠ” ê°’ì„ state ì— ë„£ì„ ë•Œì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ (ë§ˆìš´íŠ¸ì—ì„œë„ í˜¸ì¶œë¨)
2. shouldComponentUpdate ë©”ì„œë“œ : ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ì„ í•´ì•¼ í• ì§€ ë§ì•„ì•¼ í• ì§€ë¥¼ ê²°ì •í•˜ëŠ” ë©”ì„œë“œ ( true ë¥¼ ë°˜í™˜í•˜ë©´ ë¦¬ë Œë”ë§, false ë©´ ë¦¬ë Œë”ë§ í•˜ì§€ ì•ŠìŒ.)
3. render ë©”ì„œë“œ : ì¤€ë¹„í•œ UIë¥¼ ë Œë”ë§í•˜ëŠ” ë©”ì„œë“œ
4. getSnapshotBeforeUpdate : ì»´í¬ë„ŒíŠ¸ ë³€í™”ë¥¼ DOMì— ë°˜ì˜í•˜ê¸° ì§ì „ì— í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ
5. componentDidUpdate : ì»´í¬ë„ŒíŠ¸ì˜ ì—…ë°ì´íŠ¸ ì‘ì—…ì´ ëë‚œ í›„ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œ


### ğŸ±â€ğŸ‰ ì–¸ë§ˆìš´íŠ¸ ###
- ì»´í¬ë„ŒíŠ¸ë¥¼ DOMì—ì„œ ì œê±°í•˜ëŠ” ê²ƒì„ ì–¸ë§ˆìš´íŠ¸(unmount)ë¼ê³  í•œë‹¤. ì»´í¬ë„ŒíŠ¸ë¥¼ ì–¸ë§ˆìš´íŠ¸í•˜ë©´ ë‹¤ìŒì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
  - componentWIllUnmount : ì»´í¬ë„ŒíŠ¸ê°€ ì›¹ ë¸Œë¼ìš°ì €ìƒì—ì„œ ì‚¬ë¼ì§€ê¸° ì „ì— í˜¸ì¶œí•˜ëŠ”ë©”ì„œë“œ

```jsx
import React, { Component } from "react";

export default class LifeCycleSample extends Component {
  state = {
    number: 0,
    color: null
  };

  myRef = null;
  constructor(props) {
    super(props);
    console.log("constructor");
  }

  static getDerivedStateFromProps(nextProps, prevState) {
    console.log("getDerivedStateFromProps");
    if (nextProps.color !== prevState.color) {
      return { color: nextProps.color };
    }
    return null;
  }

  componentDidMount() {
    console.log("componentDidMount");
  }

  shouldComponentUpdate(nextProps, nextState) {
    console.log("shouldComponentUpdate", nextProps, nextState);
    return nextState.number % 2 !== 1;
  }

  componentWillUnmount() {
    console.log("componentWillUnmount");
  }

  handleClick = () => {
    this.setState({
      number: this.state.number + 1
    });
  };

  getSnapshotBeforeUpdate(prevProps, prevState) {
    console.log("getSnapShotBeforeUpdate");
    if (prevProps.color !== this.props.color) {
      return this.myRef.style.color;
    }
    return null;
  }

  componentDidUpdate(prevProps, prevState, snapshot) {
    console.log("componentDidUpdate", prevProps, prevState);
    if (snapshot) {
      console.log("just before updating", snapshot);
    }
  }

  render() {
    console.log("render");
    const style = {
      color: this.props.color
    };
    return (
      <div>
        {/* {this.props.missing.value} */}
        <h1 style={style} ref={(ref) => (this.myRef = ref)}>
          {this.state.number}
        </h1>
        <p>color: {this.state.color}</p>
        <button onClick={this.handleClick}>plus</button>
      </div>
    );
  }
}
```

## ğŸ¤” í•¨ìˆ˜í˜• ë§›ë³´ê¸° ##


```jsx
// í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¡œ ì‘ì„± ë¹„êµí•˜ë‹ˆ í•¨ìˆ˜í˜• hookì´ ë” ëª…í™•í•˜ê³  ì½”ë“œ ì–‘ë„ ì ë‹¤. https://adjh54.tistory.com/43
import React, { Component } from "react";

export default LifeCycleSample = () => {
    /**
   * ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œ ì‹œ ê°€ì¥ ë¨¼ì € í˜¸ì¶œì´ ë˜ëŠ” ê³µê°„
   * ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš© ë  stateë‚˜ í•¨ìˆ˜ë“¤ì„ ì •ì˜ í•˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤.
   */
  console.log("ê°€ì¥ ë¨¼ì € í˜¸ì¶©ë˜ëŠ” êµ¬ê°„ : constructor");
  
  const { number, setNumber } = useState(0);
  const { colur, setColor } = useState(null);
  let myRef = null;

  static getDerivedStateFromProps(nextProps, prevState) {
    console.log("getDerivedStateFromProps");
    if (nextProps.color !== prevState.color) {
      return { color: nextProps.color };
    }
    return null;
  }

 useEffect(() => {
        console.log("ë°°ì—´ì„ ìƒëµ: í™”ë©´ì´ ë Œë”ë§ ëœ ì´í›„ ìˆ˜í–‰ì´ ë˜ë©°, ë¦¬ ë Œë”ë§ì´ ë°œìƒí•˜ëŠ” ê²½ìš° ë‹¤ì‹œ ìˆ˜í–‰ì´ ëœë‹¤(render)");
  });

 useEffect(() => {
        console.log("ë¹ˆ ë°°ì—´: í™”ë©´ì´ ë§ˆìš´íŠ¸ ë  ë•Œì—ë§Œ ìˆ˜í–‰ë¨: componentDidMount()ê³¼ ë™ì¼");
  }, []); 
  // ê°€ì¥ ì²˜ìŒ ë Œë”ë§ ë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•ŒëŠ” deps ìœ„ì¹˜ì— ë¹ˆ ë°°ì—´ì„ ë„£ëŠ”ë‹¤
    
  useEffect(() => {
      console.log("íŠ¹ì • props, state ê°’ì— ë³€í™”ê°€ ìƒê²¼ì„ ê²½ìš° / numberì˜ ë³€í™”ê°€ ë°œìƒí•˜ì˜€ì„ ê²½ìš° ìˆ˜í–‰ì´ ëœë‹¤. : componentDidUpdate()ì™€ ë™ì¼"
  }, [number]); 

  useEffect(() => {
  let timer = setTimeout(() => setShow(true), 3000); //unmount ì‹œì—ë„ memoryì— timerê°€ ë‚¨ì•„ ìˆì§€ ì•Šê¸° ìœ„í•´ cleanup ì¶”ê°€ (webSocket ë„ ë§ˆì°¬ê°€ì§€)
  return () => {
    clearTimeout(timer); // clean up (unmount ë  ì‹œì— ì‹œí–‰)
  };
}, []);//unmout ë  ë•Œì—ë§Œ ì‹¤í–‰ë˜ê³  ì‹¶ìœ¼ë©´ ë¹ˆ ë°°ì—´ì„ deps ì— ì¶”ê°€í•´ì¤€ë‹¤

  return ( 
    <>
      <div>
        {console.log("rendering...");}
        <h1 style={style} ref={(ref) => (myRef = ref)}>
          {number}
        </h1>
        <p>color: {color}</p>
        <button onClick={handleClick}>plus</button>
      </div>
    </>
  );
}

```

### ğŸ±â€ğŸ‰useEffect ###
> ğŸ’¡ [ ë©”ì„œë“œ êµ¬ì¡° ] useEffect( function, deps? );
> * function : useEffectê°€ ìˆ˜í–‰ ë  ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
> * deps [optional] : ë°°ì—´ í˜•íƒœì´ë©°, ì˜ì¡´(dependency) ê°’ì„ ì˜ë¯¸í•œë‹¤.

> ğŸ’¡ [ ë” ì•Œì•„ê°€ê¸° ] deps[optinal] ê°’ì˜ ì˜ë¯¸

1. ê°’ì´ ì—†ì„ ê²½ìš°
  - useEffect(()â‡’{})
  - í™”ë©´ì´ ë Œë”ë§ ëœ ì´í›„ ìˆ˜í–‰ì´ ë˜ë©°, ë¦¬ ë Œë”ë§ì´ ë°œìƒí•˜ëŠ” ê²½ìš° ë‹¤ì‹œ ìˆ˜í–‰ì´ ëœë‹¤

2. ë¹ˆ ë°°ì—´ ì¸ê²½ìš°
  - useEffect(()â‡’{}, [])
  - í™”ë©´ì´ ë Œë”ë§ ëœ ì´í›„ì—ë§Œ ìˆ˜í–‰ì´ ëœë‹¤.

3. ë°°ì—´ ê°’ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°
  - useEffect(()â‡’{}, [ê°’])
  - í™”ë©´ì´ ë Œë”ë§ ëœ ì´í›„ì— ìˆ˜í–‰ì´ ë˜ê³ , â€˜ê°’â€™ì´ ë³€ê²½ë˜ì—ˆì„ ê²½ìš° í•´ë‹¹ ë©”ì„œë“œê°€ ìˆ˜í–‰ì´ ëœë‹¤.

4. depsì— íŠ¹ì • ê°’ì„ ë„£ê²Œ ëœë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ ë  ë•Œ, ì§€ì •í•œ ê°’ì´ ë°”ë€” ë•Œ, ì–¸ë§ˆìš´íŠ¸ ë  ë•Œ, ê°’ì´ ë°”ë€Œê¸° ì§ì „ì— ëª¨ë‘í˜¸ì¶œì´ ëœë‹¤.

> ğŸ’¡ clean-up í•¨ìˆ˜

- Componentì˜ unmountì´ì „ / updateì§ì „ì— ì–´ë– í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤ë©´ Clean-upí•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ ì£¼ì–´ì•¼ í•œë‹¤.

  - unmount ë  ë•Œ : useEffect(func, [])
  - íŠ¹ì •ê°’ update ì§ì „ : useEffect(func, [íŠ¹ì •ê°’])

- clean-upí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œë˜ë©´, ì‘ë™ ìˆœì„œëŠ”
  - re-render -> ì´ì „ effect clean-up -> effect