---
title: "[Reactë¥¼ ë‹¤ë£¨ëŠ” ê¸°ìˆ ] 8ì¥ - Hooks"
excerpt: ""
toc: true
toc_sticky: true

categories:
  - React
tags:
  - [React, JS, Java Script, Study]
---

## ğŸ˜‰ useState

- ì²« ë²ˆì§¸ ì¸ìë¡œ í˜„ì¬ ìƒíƒœ, ë‘ ë²ˆì§¸ ì¸ìë¡œ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” í•¨ìˆ˜
- ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¬ ë• í•­ìƒ ë¶ˆë³€ì„± ìœ ì§€

```jsx
import React, { useState } from "react";

export default function Counter() {
  const [value, setValue] = useState(0);

  return (
    <div>
      <h1>The number is {value}</h1>
      <button
        onClick={() => {
          setValue(value + 1);
        }}
      >
        +1
      </button>
      <button
        onClick={() => {
          setValue(value - 1);
        }}
      >
        -1
      </button>
    </div>
  );
}
```

## ğŸ˜‰ useEffect

- useEffect( function, deps? );
- function : useEffectê°€ ìˆ˜í–‰ ë  ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
- deps [optional] : ë°°ì—´ í˜•íƒœì´ë©°, ì˜ì¡´(dependency) ê°’ì„ ì˜ë¯¸í•œë‹¤.

### deps[optinal] ê°’ì˜ ì˜ë¯¸

1. ë§ˆìš´íŠ¸ ë ë•Œ, ì—…ë°ì´íŠ¸ ë ë•Œ - ê°’ì´ ì—†ì„ ê²½ìš°

- useEffect(()â‡’{})
- í™”ë©´ì´ ë Œë”ë§ ëœ ì´í›„ ìˆ˜í–‰ì´ ë˜ë©°, ë¦¬ ë Œë”ë§ì´ ë°œìƒí•˜ëŠ” ê²½ìš° ë‹¤ì‹œ ìˆ˜í–‰ì´ ëœë‹¤

2. ë§ˆìš´íŠ¸ ë  ë•Œë§Œ ì“°ì„ - ë¹ˆ ë°°ì—´ ì¸ê²½ìš°

- useEffect(()â‡’{}, [])
- í™”ë©´ì´ ë Œë”ë§ ëœ ì´í›„ì—ë§Œ ìˆ˜í–‰ì´ ëœë‹¤.

3. íŠ¹ì •ê°’ì´ ì—…ë°ì´íŠ¸ ë  ë•Œë§Œ ì‹¤í–‰ - ë°°ì—´ ê°’ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°

- useEffect(()â‡’{}, [ê°’])
- í™”ë©´ì´ ë Œë”ë§ ëœ ì´í›„ì— ìˆ˜í–‰ì´ ë˜ê³ , â€˜ê°’â€™ì´ ë³€ê²½ë˜ì—ˆì„ ê²½ìš° í•´ë‹¹ ë©”ì„œë“œê°€ ìˆ˜í–‰ì´ ëœë‹¤.

4. depsì— íŠ¹ì • ê°’ì„ ë„£ê²Œ ëœë‹¤ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ ë  ë•Œ, ì§€ì •í•œ ê°’ì´ ë°”ë€” ë•Œ, ì–¸ë§ˆìš´íŠ¸ ë  ë•Œ, ê°’ì´ ë°”ë€Œê¸° ì§ì „ì— ëª¨ë‘í˜¸ì¶œì´ ëœë‹¤.

> ğŸ’¡clean-up í•¨ìˆ˜

- Componentì˜ unmountì´ì „ / updateì§ì „ì— ì–´ë– í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤ë©´ Clean-upí•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ ì£¼ì–´ì•¼ í•œë‹¤.

  - unmount ë  ë•Œ : useEffect(func, [])
  - íŠ¹ì •ê°’ update ì§ì „ : useEffect(func, [íŠ¹ì •ê°’])

- clean-upí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œë˜ë©´, ì‘ë™ ìˆœì„œëŠ”
  - re-render -> ì´ì „ effect clean-up -> effect

```jsx
useEffect(() => {
  console.log("ì¼ë°˜ ìƒí™©1 -> ë§ˆìš´íŠ¸ë˜ì–´ì„œ Info ì»´í¬ë„ŒíŠ¸ê°€ ë³´ì¼ ë•Œ");
  console.log("ì¼ë°˜ ìƒí™©2 -> ì •ë³´ê°€ ì—…ë°ì´íŠ¸ ë  ë•Œ");
  return () => {
    console.log("ë’·ì •ë¦¬ í•¨ìˆ˜ ìƒí™©1 : ì–¸ë§ˆìš´íŠ¸ ë˜ì–´ì„œ ìˆ¨ê¸°ë ¤í•  ë•Œ");
    console.log(
      "ë’·ì •ë¦¬ í•¨ìˆ˜ ìƒí™©2 -> ì—…ë°ì´íŠ¸ ë˜ê¸° ì§ì „ì—. ì¦‰ inputì— ê°’ ì…ë ¥í•´ë„ ì—…ë°ì´íŠ¸ ì§ì „ì¸ ìƒí™©ë‚˜ì˜´. ë¦¬ì•¡íŠ¸ -> ë¦¬ì•¡ã…Œ"
    );
    console.log("ìƒí™© 2ëŠ” 2ë²ˆì§¸ ë°°ì—´ì— ê°’ì— ë”°ë¼ ë‹¬ë¼ì§");
  };
}, [name]);
```

## ğŸ˜‰ useReducer

- ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ ìƒí™©ì— ë”°ë¼ ë‹¤ì–‘í•œ ìƒíƒœë¥¼ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ê³  ì‹¶ì„ ë•Œ
- ì§€ê¸ˆê¹Œì§€ëŠ” onClick ì´ë²¤íŠ¸ ê°™ì€ ëˆ„ë¥´ëŠ” ìƒí™©ì—ë§Œ ê°’ì„ ì—…ë°ì´íŠ¸ í–ˆìŒ.
- reducer(state, action). (í˜„ì¬ ìƒíƒœ, ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ í•„ìš”í•œ ì •ë³´ë¥¼ ë‹´ì€ ì•¡ì…˜)
- action ê°’ì„ ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¡œ ë³€í™˜ -> ë¶ˆë³€ì„± ìœ ì§€
- ì–´ë–¤ actionì¸ì§€ ì•Œë ¤ì£¼ëŠ” type í•„ë“œ í•„ìš”
- ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— í•¨ìˆ˜ë¡œ ì„¤ì •
- useReducerì˜ ê°€ì¥ í° ì¥ì  : ì»´í¬ë„ŒíŠ¸ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ë°”ê¹¥ìœ¼ë¡œ ë¹¼ë‚¸ë‹¤.

```jsx
function reducer(state, action) {
  switch (action.type) {
    case "INCREASE":
      return { value: state.value + 1 };
    case "DECREASE":
      return { value: state.value - 1 };
    default:
      return state;
  }
}

const Counter = () => {
  const [state, dispatch] = useReducer(reducer, { value: 0 });

  return (
    <div>
      <p>í˜„ì¬ ì¹´ìš´í„° ê°’ : {state.value}</p>
      <button onClick={() => dispatch({ type: "INCREASE" })}>+1</button>
      <button onClick={() => dispatch({ type: "DECREASE" })}>-1</button>
    </div>
  );
};
```

## ğŸ˜‰ useMemo

- ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì—°ì‚° ìµœì†Œí™”
- ì‹¤ìŠµ ì½”ë“œëŠ” insertì™¸ì— input ë‚´ìš© ìˆ˜ì •ë˜ì–´ë„ getAverageí•¨ìˆ˜ê°€ í˜¸ì¶œë¨
- useMemo ì‚¬ìš©í•˜ë©´ íŠ¹ì • ê°’ì´ ë°”ë€Œì—ˆì„ ë•Œë§Œ ì—°ì‚°ì„ ì‹¤í–‰, ì›í•˜ëŠ” ê°’ì´ ë°”ë€Œì§€ ì•Šì•˜ë‹¤ë©´ ì´ì „ ì—°ì‚° ê²°ê³¼ë¥¼ ë‹¤ì‹œ ì‚¬ìš©

## ğŸ˜‰ useCallback

- ë§Œë“¤ì–´ ë†¨ë˜ í•¨ìˆ˜ ì¬ì‚¬ìš©
- ë Œë”ë§ ì„±ëŠ¥ ìµœì í™”
- ê·¸ëƒ¥ í•¨ìˆ˜ ì„ ì–¸í•˜ë©´ ë Œë”ë§ í•  ë•Œë§ˆë‹¤ í•¨ìˆ˜ ë‹¤ì‹œ ë Œë”ë§
- useCallback ì‚¬ìš©í•˜ë©´ ì²˜ìŒ ë Œë”ë§ í–ˆì„ ë•Œ ë§Œë“¤ì–´ ë†“ì€ í•¨ìˆ˜ ë¦¬ë Œë”ë§ ì‹œ ë‹¤ì‹œ ì•ˆë§Œë“¤ê³  ì¬ì‚¬ìš©
- ë‘ ë²ˆì§¸ ì¸ìë¡œ ì—…ë°ì´íŠ¸ ëœ ìƒíƒœ ì ìš©í•˜ë©´, ê·¸ë•Œë§Œ ë¦¬ë Œë”ë§í•  ë•Œ í•¨ìˆ˜ ë‹¤ì‹œ ìƒì„±

```jsx
import React, { useState, useMemo, useCallback } from "react";

const getAverage = (numbers) => {
  console.log("calculating now");
  if (numbers.length === 0) return 0;
  const sum = numbers.reduce((a, b) => a + b);
  return sum / numbers.length;
};

export default function Average() {
  const [list, setList] = useState([]);
  const [number, setNumber] = useState("");

  const onChange = useCallback((e) => {
    setNumber(e.target.value);
  }, []);

  const onInsert = useCallback(
    (e) => {
      const nextList = list.concat(parseInt(number, 10));
      setList(nextList);
      setNumber("");
    },
    [number, list]
  );

  const avg = useMemo(() => getAverage(list), [list]);

  return (
    <div>
      <h1>Average</h1>
      <input value={number} onChange={onChange} />
      <button onClick={onInsert}>Enroll</button>
      <ul>
        {list.map((value, index) => (
          <li key={index}>{value}</li>
        ))}
      </ul>
      <div>
        <b>í‰ê· ê°’:</b> {avg}
      </div>
    </div>
  );
}
```

## ğŸ˜‰ useRef

- ref ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê³ ì í•  ë•Œ ì“¸ ìˆ˜ ìˆë‹¤.
- ì»´í¬ë„ŒíŠ¸ì˜ ë¡œì»¬ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- useRefì˜ ê°ì²´ëŠ” ë Œë”ë§ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

```jsx
const inputEl = useRef(null);

const onInsert = useCallback(e => {
  ...
  inputEl.current.focus();
})

<input value={number} onChange={onChange} ref={inputEl} />
<button onClick={onInsert}>ë“±ë¡</button> //domì— ì ‘ê·¼

const id = useRef(1);
const setId = (n) => {
  id.current = n;
}
const printId = () => {
  console.log(id.current) // ë¡œì»¬ ë³€ìˆ˜ (ë Œë”ë§ê³¼ ìƒê´€ì—†ì´ ë°”ë€” ìˆ˜ ìˆëŠ” ê°’) ì‚¬ìš©í•˜ê¸°
}
```

## ğŸ˜‰ custom hooks

```jsx
import { useContext } from "react";
import RouterContext from "../components/RouterContext";

const useRouter = () => {
  const { setPath } = useContext(RouterContext);
  const push = (path) => {
    history.pushState({}, "", path);
    dispatchEvent(new Event("popstate"));
    setPath(path);
  };
  return { push };
};
export default useRouter;
```
